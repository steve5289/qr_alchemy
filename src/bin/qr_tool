#!/usr/bin/env python3

import sys
import getopt
import qr_alchemy.process as qr_process
import qr_alchemy.gui_process as qr_gui_process
import qr_alchemy.gui_saved as qr_gui_saved

def main():
    optlist, args = getopt.getopt(sys.argv[1:], "hf:c:")
    configfile="./src/etc/qr_alchemy.conf"
    file=''

    for opt, arg in  optlist:
        if opt == '-h':
            help()
        elif opt == '-f':
            file=arg
        elif opt == '-c':
            configfile=arg
        else:
            help()

    qr_process.configfile(configfile)
    if file:
        qr_code = qr_process.qr_image_handler(file)
        if qr_code:
            qr_gui_process.qr_gui_handle_code(qr_code)
    elif len(args) >= 1:
        qr_gui_process.qr_gui_handle_code(args[0])
    else:
        qr_gui_saved.qr_gui_saved()


main()
